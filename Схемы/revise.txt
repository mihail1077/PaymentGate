@startuml

participant "Платёжная система"
participant "Почтовый сервер"
participant "Адаптер платёжной системы"
participant "Платёжный шлюз"

"Платёжная система" -> "Почтовый сервер": Реестр сверки
...

"Адаптер платёжной системы" -> "Почтовый сервер": Получение реестра сверки
activate "Адаптер платёжной системы"
activate "Почтовый сервер"
"Почтовый сервер" -> "Адаптер платёжной системы": Реестр сверки
deactivate "Почтовый сервер"

"Адаптер платёжной системы" -> "Платёжный шлюз": Реестр сверки
activate "Платёжный шлюз"
"Платёжный шлюз" -> "Платёжный шлюз": Сохранение реестра
"Платёжный шлюз" -> "Адаптер платёжной системы": Реестр получен
deactivate "Адаптер платёжной системы"
deactivate "Платёжный шлюз"
...

"Платёжный шлюз" -> "Платёжный шлюз": Сверка реестра

@enduml