@startuml

participant "Абонент"
participant "Терминал"
participant "АС Партнёра"
box "Платёжный шлюз"
participant "Адаптер платёжной системы"
participant "Ядро платёжного шлюза"
end box

"Абонент" -> "Терминал": Намерение совершить платёж\nID Абонента, сумма, услуга
activate "Абонент"
activate "Терминал"
"Терминал" -> "АС Партнёра": Запрос возможности платежа
activate "АС Партнёра"
"АС Партнёра" -> "Адаптер платёжной системы": Запрос возможности платежа\nпо протоколу партнёра
activate "Адаптер платёжной системы"
"Адаптер платёжной системы" -> "Ядро платёжного шлюза": Запрос возможности платежа по услуге
activate "Ядро платёжного шлюза"
ref over "Ядро платёжного шлюза"
Запрос возможности платежа по услуге
end ref
"Ядро платёжного шлюза" -> "Адаптер платёжной системы": Оплата услуги возможна
deactivate "Ядро платёжного шлюза"
"Адаптер платёжной системы" -> "АС Партнёра": Оплата услуги возможна\nпо протоколу партнёра
deactivate "Адаптер платёжной системы"
"АС Партнёра" -> "Терминал": Оплата услуги возможна
deactivate "АС Партнёра"
"Терминал" -> "Абонент": Оплата услуги возможна

"Абонент" -> "Терминал": Подтверждение оплаты\nденежные средства
"Терминал" -> "Абонент": Платёж принят\nЧек на платёж
deactivate "Абонент"
"Терминал" -> "АС Партнёра": Платёж
deactivate "Терминал"
activate "АС Партнёра"
"АС Партнёра" -> "Адаптер платёжной системы": Платёж\nпо протоколу партнёра
activate "Адаптер платёжной системы"
"Адаптер платёжной системы" -> "Ядро платёжного шлюза": Платёж по услуге
activate "Ядро платёжного шлюза"
ref over "Ядро платёжного шлюза"
Платёж по услуге
end ref
"Ядро платёжного шлюза" -> "Адаптер платёжной системы": Платёж принят
deactivate "Ядро платёжного шлюза"
"Адаптер платёжной системы" -> "АС Партнёра": Платёж принят\nпо протоколу партнёра
deactivate "Адаптер платёжной системы"
deactivate "АС Партнёра"

@enduml