@startuml

participant "»нициатор платежа"
participant "ядро платЄжного шлюза"
participant "јдаптер биллинга"

"»нициатор платежа" -> "ядро платЄжного шлюза": –егистраци€ корзины
activate "»нициатор платежа"
activate "ядро платЄжного шлюза"

loop ƒл€ каждой услуги из корзины
"ядро платЄжного шлюза" -> "јдаптер биллинга": ѕроверка возможности совершени€ платежа(Precheck)
activate "јдаптер биллинга"
"јдаптер биллинга" -> "ядро платЄжного шлюза": ѕроверка выполнена
deactivate "јдаптер биллинга"
end

opt ≈сли задан контактный телефон
"ядро платЄжного шлюза" -> "јдаптер биллинга": –егистраци€ контрактной информации
end

"ядро платЄжного шлюза" -> "ядро платЄжного шлюза": —охранение информации о корзине
"ядро платЄжного шлюза" -> "»нициатор платежа":  орзина зарегистрирована: ID корзины
deactivate "»нициатор платежа"
deactivate "ядро платЄжного шлюза"

@enduml