@startuml

participant "Инициатор платежа"
participant "Платёжный шлюз"

"Инициатор платежа" -> "Платёжный шлюз": Регистрация корзины
activate "Инициатор платежа"
activate "Платёжный шлюз"

loop Для каждой услуги из корзины
|||
ref over "Платёжный шлюз": <<Precheck>>
end

"Платёжный шлюз" -> "Платёжный шлюз": Сохранение информации о корзине

"Платёжный шлюз" -> "Инициатор платежа": Корзина зарегистрирована: ID корзины
deactivate "Инициатор платежа"
deactivate "Платёжный шлюз"

@enduml