@startuml

participant "Адаптер платёжной системы"
participant "Платёжный шлюз"
participant "Адаптер биллинга"

"Адаптер платёжной системы" -> "Платёжный шлюз": Запрос возможности платежа по корзине:\nID Корзины
activate "Адаптер платёжной системы"
activate "Платёжный шлюз"
"Платёжный шлюз" -> "Платёжный шлюз": Поиск сохранённой корзины

loop Для каждой услуги из корзины
"Платёжный шлюз" -> "Адаптер биллинга": Проверка возможности совершения платежа(Precheck)
activate "Адаптер биллинга"
"Адаптер биллинга" -> "Платёжный шлюз": Проверка выполнена
deactivate "Адаптер биллинга"
end

"Платёжный шлюз" -> "Адаптер платёжной системы": Оплата корзины возможна
deactivate "Адаптер платёжной системы"
deactivate "Платёжный шлюз"

@enduml