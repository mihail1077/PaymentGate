@startuml

participant "Платёжная система"
participant "Платёжный шлюз"

"Платёжная система" -> "Платёжный шлюз": Запрос возможности платежа по корзине:\nID Корзины
activate "Платёжная система"
activate "Платёжный шлюз"
"Платёжный шлюз" -> "Платёжный шлюз": Поиск сохранённой корзины

loop Для каждой услуги из корзины
|||
ref over "Платёжный шлюз": <<Precheck>>
end

"Платёжный шлюз" -> "Платёжная система": Оплата корзины возможна
deactivate "Платёжная система"
deactivate "Платёжный шлюз"

@enduml