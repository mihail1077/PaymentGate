@startuml

state "Создана" as Created
state "Готова к зачислению" as Ready
state "Зачислена" as Accounted
state "Ошибка при зачислении" as Error
state "Аннулирована" as Cancel

[*] --> Created: Обработка сообщения:\nРегистрация корзины
[*] --> Ready: Обработка сообщения:\nПлатёж по услуге
Created --> Ready: Обработка сообщения:\nПлатёж по корзине
Ready --> Accounted: От адаптера биллинга получено:\nПлатёж зарегистрирован
Accounted --> [*]
Ready --> Error: Превышено максимальное количество \nпопыток отправки платежа
Error --> [*]
Accounted --> Cancel: Получен ответ от биллинга:\nплатёж аннулирован
Cancel --> [*]

@enduml