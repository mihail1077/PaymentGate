@startuml

participant "Абонент"
participant "ЛКА или ПП"
participant "ИС Платёжной системы"
participant "BSS-решение"

"Абонент" -> "ЛКА или ПП": Намерение совершить платёж\nID Абонента
activate "Абонент"
activate "ЛКА или ПП"
"ЛКА или ПП" -> "BSS-решение": Запрос доступных услуг
activate "BSS-решение"
"BSS-решение" -> "ЛКА или ПП": Список доступных услуг
deactivate "BSS-решение"

"ЛКА или ПП" -> "Абонент": Отображение списка доступных услуг

"Абонент" -> "ЛКА или ПП": Одна или несколько услуг\nсумма для каждой услуги

"ЛКА или ПП" -> "BSS-решение": Регистрация корзины
activate "BSS-решение"
"BSS-решение" -> "ЛКА или ПП": Корзина зарегистрирована
deactivate "BSS-решение"

"ЛКА или ПП" -> "ИС Платёжной системы": Провести платёж\nID корзины, сумма платежа
activate "ИС Платёжной системы"
"ИС Платёжной системы" -> "ЛКА или ПП": Платёж принят к исполнению
"ЛКА или ПП" -> "Абонент": Платёж принят к исполнению
deactivate "ЛКА или ПП"

"ИС Платёжной системы" -> "Абонент": SMS c запросом подтверждения платежа
"Абонент" -> "ИС Платёжной системы": SMS с подтверждением платежа

"ИС Платёжной системы" -> "BSS-решение": Платёж
activate "BSS-решение"
ref over "BSS-решение"
Платёж по корзине
end ref
"BSS-решение" -> "ИС Платёжной системы": Платёж принят
deactivate "BSS-решение"

"ИС Платёжной системы" -> "Абонент": SMS: завершение платежа
deactivate "ИС Платёжной системы"
deactivate "Абонент"

@enduml