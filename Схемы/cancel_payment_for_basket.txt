@startuml

participant "јдаптер платЄжной системы"
participant "ядро платЄжного шлюза"
participant "јдаптер биллинга"
participant "Ѕиллинг"

"јдаптер платЄжной системы" -> "ядро платЄжного шлюза": ќтмена платежа по корзине
activate "јдаптер платЄжной системы"
activate "ядро платЄжного шлюза"

"ядро платЄжного шлюза" -> "ядро платЄжного шлюза": ѕоиск платежа

loop ƒл€ каждой позиции корзины
"ядро платЄжного шлюза" -> "јдаптер биллинга": јннулирование платежа
activate "јдаптер биллинга"

"јдаптер биллинга" -> "Ѕиллинг": јннулирование платежа
activate "Ѕиллинг"

"Ѕиллинг" -> "јдаптер биллинга": ѕлатЄж аннулирован
deactivate "Ѕиллинг"

"јдаптер биллинга" -> "ядро платЄжного шлюза": ѕлатЄж аннулирован
deactivate "јдаптер биллинга"

"ядро платЄжного шлюза" -> "ядро платЄжного шлюза": ‘иксаци€ факта аннулировани€
end loop

"ядро платЄжного шлюза" -> "ядро платЄжного шлюза": ‘иксаци€ факта отмены платежа

"ядро платЄжного шлюза" -> "јдаптер платЄжной системы": ѕлатЄж отменЄн


deactivate "јдаптер платЄжной системы"
deactivate "ядро платЄжного шлюза"

@enduml